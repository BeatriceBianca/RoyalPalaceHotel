<div ng-controller="commonController as maidCtrl">

    <div class="col-md-6 col-md-offset-3 editPage">

        <div class="account-menu">
            <a ui-sref="myProfile"><button id="myProfile">Edit account</button></a>
            <a ui-sref="changePassword"><button id="changePassword" class="account-menu-activ">Change Password</button></a>
        </div>

        <form name="form" action="maid/changePassword" method="post" role="form" >

            <div class="changePassword">

                <div class="form-group center-block" ng-class="{ 'has-error': form.currentPassword.$dirty &amp;&amp; form.currentPassword.$error.required &amp;&amp; maidCtrl.encryptMd5(maidCtrl.changePassword.currentPassword) != maidCtrl.currentUserPassword}">
                    <label for="currentPassword">Current password</label>
                    <input type="password" name="currentPassword" id="currentPassword" class="form-control" ng-model="maidCtrl.changePassword.currentPassword" required="required" />
                    <span ng-show="form.currentPassword.$dirty &amp;&amp; form.currentPassword.$error.required" class="help-block">Current password is required!</span>
                    <span ng-show="form.currentPassword.$dirty &amp;&amp; maidCtrl.encryptMd5(maidCtrl.changePassword.currentPassword) != maidCtrl.currentUserPassword" class="help-block">Current password is wrong!</span>
                </div>

                <div class="form-group center-block" ng-class="{ 'has-error': form.newPassword.$dirty &amp;&amp; form.newPassword.$error.required }">
                    <label for="newPassword">New password</label>
                    <input type="password" name="newPassword" id="newPassword" class="form-control" ng-model="maidCtrl.changePassword.newPassword" required="required" />
                    <span ng-show="form.newPassword.$dirty &amp;&amp; form.newPassword.$error.required" class="help-block">New password is required!</span>
                    <span ng-show="form.newPassword.$dirty &amp;&amp; maidCtrl.encryptMd5(maidCtrl.changePassword.newPassword) == maidCtrl.currentUserPassword" class="help-block">The password is the same as the current one!</span>
                </div>

                <div class="form-group center-block" ng-class="{ 'has-error': form.confirmNewPassword.$dirty &amp;&amp; form.confirmNewPassword.$error.required &amp;&amp; maidCtrl.changePassword.newPassword != maidCtrl.changePassword.confirmNewPassword}">
                    <label for="confirmNewPassword">Confirm new password</label>
                    <input type="password" name="confirmNewPassword" id="confirmNewPassword" class="form-control" ng-model="maidCtrl.changePassword.confirmNewPassword" required="required" />
                    <span ng-show="form.confirmNewPassword.$dirty &amp;&amp; form.confirmNewPassword.$error.required" class="help-block">Confirmation of the new password is required!</span>
                    <span ng-show="form.confirmNewPassword.$dirty &amp;&amp; form.newPassword.$dirty &amp;&amp; maidCtrl.changePassword.newPassword != maidCtrl.changePassword.confirmNewPassword" class="help-block">Password is not the same!</span>
                </div>

            </div>
            <div class="form-actions changePassword-button">
                <button type="submit" class="btn"
                        ng-disabled="form.$invalid ||
                                    maidCtrl.encryptMd5(maidCtrl.changePassword.currentPassword) != maidCtrl.currentUserPassword ||
                                    maidCtrl.changePassword.newPassword != maidCtrl.changePassword.confirmNewPassword ||
                                    maidCtrl.encryptMd5(maidCtrl.changePassword.newPassword) == maidCtrl.currentUserPassword">
                    Change </button>
            </div>

        </form>

    </div>
</div>